# BusinessAnalytics 

Проект разработан в целях **повторения и глубокого изучения современной бекенд-разработки** на стеке .NET 10. Основной фокус сделан на чистоте кода, архитектурных паттернах и тестировании бизнес-логики.

> **Примечание по Frontend:** Весь фронтенд-код был полностью сгенерирован (AI-generated) для визуализации данных бекенда. Основная ценность проекта сосредоточена в его серверной части.

---

## Скриншоты

### 1. Авторизация (JWT + Identity)
<img width="1332" height="798" alt="image" src="https://github.com/user-attachments/assets/4ec90e86-ad80-4f48-99ba-82ea60d12be5" />


*Механизм аутентификации на базе ASP.NET Identity с выдачей JWT токенов.*

### 2. Аналитический Дашборд
<img width="1329" height="802" alt="image" src="https://github.com/user-attachments/assets/31e3ebfb-50aa-44eb-906c-07d16eda8e53" />

*Визуализация метрик (выручка, количество заказов) с фильтрацией по периодам и таймзонам.*

### 3. Импорт Данных
<img width="1315" height="799" alt="image" src="https://github.com/user-attachments/assets/e812eab0-0d99-4065-84a9-3bbdac8d688f" />

*Загрузка CSV файлов через масштабируемый Pipeline с валидацией и дедупликацией.*

---

## Примененные паттерны проектирования

В проекте реализованы следующие паттерны для обеспечения гибкости и поддерживаемости кода:

- **Strategy (Стратегия)**:
  - Применен в `AnalyticsService` для вычисления различных метрик (`TotalAmountStrategy`, `OrderCountStrategy`). Позволяет легко добавлять новые виды аналитики без изменения основного сервиса.
- **Decorator (Декоратор)**:
  - Использован для прозрачного добавления логики замера производительности (`PerformanceImportPipelineDecorator`) к основному пайплайну импорта.
- **Observer (Наблюдатель)**:
  - Реализован через `IImportEventDispatcher` и `IImportObserver` для уведомления различных частей системы (например, аудит-лога) о завершении импорта.
- **Pipeline (Конвейер)**:
  - Процесс импорта разбит на независимые этапы (Parse, Validation, Transform, Persist), что упрощает тестирование и модификацию каждого шага.
- **Repository & Unit of Work**:
  - Абстракция над EF Core для изоляции доступа к данным и обеспечения атомарности транзакций.
- **Dependency Injection (Внедрение зависимостей)**:
  - Активно используется встроенный контейнер .NET для слабой связности компонентов.
- **Builder**
  - для тестов

---

## Тестирование

Код покрыт **юнит-тестами** (xUnit + Moq + FluentAssertions):
- **AnalyticsServiceTests**: 16+ сценариев, включая сложные случаи с таймзонами, границами дат и агрегацией по дням/неделям/месяцам.
- **Pipeline Stages**: Отдельные тесты для каждого этапа импорта.
- **Decorators & Observers**: Проверка корректности работы оберток и системы уведомлений.

---

## Технологический стек

- **Backend**: .NET 10, Entity Framework Core, SQLite, ASP.NET Identity, JWT, Scrutor (для декорирования).
- **Frontend**: React (Vite), Recharts, Axios, Vanilla CSS (Glassmorphism design).

---

## Чего не хватает до Production-варианта (Roadmap)

Для превращения учебного проекта в коммерческое решение требуется:

1. **Больше аналитики**: добавить больше статистических таблиц и продуктовых показателей
2. **Масштабируемая база данных**: Переход с SQLite на PostgreSQL или SQL Server.
3. **Фоновые задачи (Background Jobs)**: Вынос тяжелого импорта в фоновые процессы (Hangfire или RabbitMQ) вместо обработки в HTTP-запросе.
4. **Кэширование**: Использование Redis для хранения результатов аналитики.
5. **Улучшенная валидация**: Более строгая проверка CSV-файлов и обработка ошибок на уровне схемы.
6. **CI/CD**: Настройка пайплайнов для автоматического прогона тестов и деплоя.
7. **Обсервабилити**: Интеграция с системами мониторинга (Serilog + Seq/ELK, OpenTelemetry).

---

## Как запустить

### Backend
```bash
cd BusinessAnalytics.API
dotnet run
```

### Frontend
```bash
cd business-analytics-ui
npm install
npm run dev
```
